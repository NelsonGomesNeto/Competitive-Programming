code = """
                                     >,<>>,>,<[->-               
                                  >+<><<]+->>[-<<+>>]            
                                <+-><><<<[-+->-<+-<+>]<          
                               [->+<]><>>>>>><>++->>+->>         
                              >>>+[>><>>>[-]<[-<>-+]<<>[-        
                             +-]-++-+-<         [-]<><<>[+       
                            ---+]<><<             <<+-<<<<>      
                           -+<><<<>                 <+-<<[->     
                          >>>>>>+                     >>>>>-+    
                         >+<<<><            <          <><<<<<   
                        <<<<]>[           ->>           >>><><>  
                       ><>>+>>          >>>>+            <<<<<>< 
                      <<<<+-<           <<<]>             [->>>>>
                                        >><>+                    
                                        >>>>-                    
                                        +><>>                    
                                        +<<<<                    
                                        <<+-<                    
         <<<><<<<        -+><]     >>-++-+>+-+[<-]      <[->>    
      <>++-<<<]>>>>      [-<<<     +--+<<<<+>><>>>      >>>]>    
     [-<<-+<<<<<+<>>     +->>>     >>>]>[-<<<<><<<      ><<+>    
    >>>>>>]>>>>>><>>+    [-<<<     <+--+<><+-<<<<<      <[->>    
   +>>+<<<<]+->[->>+>>   +-+<<     <<]>[-<<+>>]>[-      <<+>>    
  ]+[[<>-]-++>[<-]<+-[   +--><     >><>-<<<]>>-+->      >>+>[    
 <-]<+-[-       >+>[-    <-]<[          >>[-<           <-+->    
 ]-<<[->         ><-     >+->-          +-<<<           <]]<]    
 >>-<<<           <      <+>[>          <<-]<           [>+->    
[-+<<-                   >]<<[          <]]>-           +-]>>    
>>><>>                   >><>+          ]-<<<           >+-<<    
<>+>-                    ++[<-          ]<[-+           >>+[<    
<<>->                    -+]<<          [>>>+           [<-+<    
<->>]                    <<<[<          ]]]>-           ]>>>>    
[-]<<                    <<<<<          -+<><           <<<<<    
<[-]>                    >+>+[          <-]<[           ->>+<    
><<<]                    >+>[<          -]<[>           >[<<-    
>]<<[                    <]]>-          [+>>>           >>>><    
++-++                    +++++          ++<<<           <<<+>    
+-[<<>                   -]<[>          >[<<-           >]<<[    
<]]>-[                   ++>[<          -]<[-           >>-<<    
 <]>>->           >      +>>+>          -[<-]           <[<<[    
 ->>>+<<         ><<     ]+->>          >>>+>           +[<><    
 -]<><[->       >+<<<    ]<<-<          ]<<<<           +>[<-    
  ]<[>>[<<->]<<[<]]>-]   >>+++          +++++[   ->     +++++    
   +<]>[-<<<<+>>>>]>>>   >>+><          >-+[<-]<[>>     [<<->    
    ]<<[<]]>-[++>[<-]    <[->>          -<<<]>>-<<<     <<<<<    
     +>+[<-]<[->>+<<     <]>>>          >>>>>+>[<-      ]<[>>    
      [<<->]<<[<]]>      -]<<[           -]<<<<<+>      [<-]<    
         [>>[<<->        ]<<[<            ]]>-]<<       [.<]!    
"""

t = int(input())
for _ in range(t):
    line = input()

    pycode = "int ptr = 0\nint tape[10000]; memset(tape, '\0', sizeof(tape));\n"
    inptr = 0
    tabs = 0
    for c in code:
        if c in "><[]+-,.":
            # pycode += "# %d %c\n" % (tabs, c)
            pycode += "    " * tabs
            if c == '>':
                pycode += "ptr += 1;\n"
            if c == '<':
                pycode += "ptr -= 1;\n"
            if c == '+':
                pycode += "tape[ptr] += 1;\n"
            if c == '-':
                pycode += "tape[ptr] -= 1;\n"
            if c == '[':
                pycode += "while (tape[ptr] != 0) {\n"
                tabs += 1
            if c == ']':
                pycode += "}\n"
                tabs -= 1
            if c == ',':
                pycode += "tape[ptr] = happy;\n"
                inptr += 1
            if c == '.':
                pycode += "putchar(tape[ptr]);\n"
    print(pycode)
    # exec(pycode)